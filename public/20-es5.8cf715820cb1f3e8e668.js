function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{P7AT:function(e,n,t){"use strict";t.r(n),t.d(n,"CargarHorarioPageModule",(function(){return M}));var i=t("ofXK"),o=t("3Pt+"),s=t("TEn/"),a=t("tyNb"),r=t("mrSG"),c=t("EUZL"),l=t("fXoL"),u=t("LMH3"),b=t("ex6u"),f=t("p/K2");function h(e,n){if(1&e){var t=l.Rb();l.Qb(0,"ion-list"),l.Qb(1,"ion-item"),l.Qb(2,"ion-label"),l.oc(3),l.Pb(),l.Qb(4,"ion-checkbox",5),l.Yb("ngModelChange",(function(e){return l.jc(t),n.$implicit.isChecked=e}))("ionChange",(function(){return l.jc(t),l.ac(2).onChange()})),l.Pb(),l.Pb(),l.Pb()}if(2&e){var i=n.$implicit;l.zb(3),l.pc(i.name),l.zb(1),l.fc("ngModel",i.isChecked)}}function d(e,n){if(1&e&&(l.Qb(0,"ion-content"),l.mc(1,h,5,2,"ion-list",4),l.Pb()),2&e){var t=l.ac();l.zb(1),l.fc("ngForOf",t.careers)}}function m(e,n){if(1&e){var t=l.Rb();l.Qb(0,"ion-item"),l.Mb(1,"ion-icon",8),l.Qb(2,"ion-checkbox",5),l.Yb("ngModelChange",(function(e){return l.jc(t),n.$implicit.isItemChecked=e}))("ionChange",(function(){l.jc(t);var e=l.ac().index;return l.ac(2).verifyEvent(e)})),l.Pb(),l.Qb(3,"ion-label"),l.oc(4),l.Pb(),l.Pb()}if(2&e){var i=n.$implicit;l.zb(2),l.fc("ngModel",i.isItemChecked),l.zb(2),l.pc(i.nombre)}}function g(e,n){if(1&e){var t=l.Rb();l.Qb(0,"ion-list"),l.Qb(1,"ion-grid"),l.Qb(2,"ion-row"),l.Qb(3,"ion-item",6),l.Qb(4,"ion-checkbox",7),l.Yb("ngModelChange",(function(e){return l.jc(t),n.$implicit.checkParent=e}))("click",(function(e){l.jc(t);var i=n.index;return l.ac(2).checkCheckbox(e,i)})),l.Pb(),l.Pb(),l.Qb(5,"ion-item"),l.Qb(6,"ion-label"),l.Qb(7,"strong"),l.oc(8),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.mc(9,m,5,2,"ion-item",4),l.Pb()}if(2&e){var i=n.$implicit,o=n.index;l.zb(4),l.fc("ngModel",i.checkParent)("indeterminate",i.indeterminateState),l.zb(4),l.qc("Semestre ",o+1,""),l.zb(1),l.fc("ngForOf",i.materias)}}function C(e,n){if(1&e&&(l.Qb(0,"ion-content"),l.mc(1,g,10,4,"ion-list",4),l.Pb()),2&e){var t=l.ac();l.zb(1),l.fc("ngForOf",t.semestersClasses)}}function p(e,n){if(1&e){var t=l.Rb();l.Qb(0,"ion-item"),l.Mb(1,"ion-icon",8),l.Qb(2,"ion-checkbox",9),l.Yb("ngModelChange",(function(e){return l.jc(t),n.$implicit.isItemChecked=e})),l.Pb(),l.Qb(3,"ion-label"),l.Qb(4,"h2"),l.oc(5),l.Pb(),l.Qb(6,"h2"),l.oc(7),l.Pb(),l.Pb(),l.Pb()}if(2&e){var i=n.$implicit;l.zb(2),l.fc("ngModel",i.isItemChecked),l.zb(3),l.pc(i.nombre),l.zb(2),l.rc(" ",i.seccion," - ",i.profesor," ")}}function v(e,n){if(1&e&&(l.Qb(0,"ion-list"),l.Qb(1,"ion-grid"),l.Qb(2,"ion-row"),l.Mb(3,"ion-item",6),l.Qb(4,"ion-item"),l.Qb(5,"ion-label"),l.Qb(6,"strong"),l.oc(7),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.mc(8,p,8,4,"ion-item",4),l.Pb()),2&e){var t=n.$implicit;l.zb(7),l.sc("",t.padre," - ",t.sigla,"","-- --"==t.enf?"":"-"+t.enf,""),l.zb(1),l.fc("ngForOf",t.hijos)}}function P(e,n){if(1&e&&(l.Qb(0,"ion-content"),l.mc(1,v,9,4,"ion-list",4),l.Pb()),2&e){var t=l.ac();l.zb(1),l.fc("ngForOf",t.selectedClassForView)}}function k(e,n){if(1&e){var t=l.Rb();l.Qb(0,"ion-item",10),l.Yb("click",(function(){return l.jc(t),l.ac().nextPage()})),l.Qb(1,"ion-label"),l.oc(2,"SIGUIENTE"),l.Pb(),l.Mb(3,"ion-icon",11),l.Pb()}}function y(e,n){if(1&e){var t=l.Rb();l.Qb(0,"ion-item",12),l.Yb("click",(function(){return l.jc(t),l.ac().previousPage()})),l.Mb(1,"ion-icon",13),l.Qb(2,"ion-label"),l.oc(3,"ATRAS"),l.Pb(),l.Pb()}}var Q,w,S,x=[{path:"",component:(Q=function(){function e(n,t,i){_classCallCheck(this,e),this.fpuna=n,this.alertController=t,this.router=i,this.currentSection={number:1,nextPageVisibility:!0,prePageVisibility:!1},this.initialize()}return _createClass(e,[{key:"initialize",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;this.fpuna.getCarrerasAll().subscribe((function(n){e.careers=n,console.log(n)}))}},{key:"onChange",value:function(){var e=[];this.careers.forEach((function(n){n.isChecked&&e.push({code:n.code,enf:n.enf,id:n._id})})),this.selectedCareer=e,console.log("tonextpage",e)}},{key:"loadSection2",value:function(){var e=this,n=this.selectedCareer[0].id;console.log("this.selectedCareer",this.selectedCareer),this.fpuna.getClasesAll().subscribe((function(t){var i=[];t.forEach((function(e){e.career_id==n&&(i[e.semester-1]||(i[e.semester-1]={materias:[]}),i[e.semester-1].materias.push({nombre:e.name}))})),e.semestersClasses=i,console.log("this.semestersClassse",i)}))}},{key:"checkCheckbox",value:function(e,n){var t=this;setTimeout((function(){t.semestersClasses[n].materias.forEach((function(e){e.isItemChecked=t.semestersClasses[n].checkParent}))}))}},{key:"verifyEvent",value:function(e){var n=this.semestersClasses[e].materias.length,t=0;this.semestersClasses[e].materias.map((function(e){e.isItemChecked&&t++})),t>0&&t<n?(this.semestersClasses[e].indeterminateState=!0,this.semestersClasses[e].checkParent=!1):t==n?(this.semestersClasses[e].checkParent=!0,this.semestersClasses[e].indeterminateState=!1):(this.semestersClasses[e].indeterminateState=!1,this.semestersClasses[e].checkParent=!1)}},{key:"loadSection3",value:function(){var e,n;this.seletedClassName=(e=this.semestersClasses,n=[],e.forEach((function(e){e.materias.forEach((function(e){e.isItemChecked&&n.push(e.nombre)}))})),n)}},{key:"readFilePopup",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({cssClass:"my-custom-class",header:"Seleccionar Horario",message:"<button>Message <strong>text</strong></button>!!!",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(e){console.log("Confirm Cancel: blah")}},{text:"Buscar",handler:function(){document.getElementById("file-input").click()}}]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"onFileChange",value:function(e){var n=this,t=e.target;if(1!==t.files.length)throw new Error("Cannot use multiple files");var i=new FileReader;i.onload=function(e){var t,i,o,s,a=n.selectedCareer[0];n.dataFromExcel=(t=e.target.result,i=a,o=c.read(t,{type:"binary"}),s=i.code,console.log("sheet",s),c.utils.sheet_to_json(o.Sheets[s],{header:1,range:11})),console.log("Class Name",n.seletedClassName);var r=function(e,n,t){var i=[],o=[];return e.forEach((function(e){n.forEach((function(n){if(function(e,n,t){var i=e[2].includes(n),o=e[2]===n,s=" "==e[2][n.length],a=void 0===e[6]||"-- --"===e[6]||e[6].includes(t);return i&&(o||s)&&a}(e,n,t.enf)){var s=o.findIndex((function(e){return e.padre===n}));-1==s&&(s=o.push({padre:n,sigla:e[5],enf:t.enf,hijos:[]})-1),o[s].hijos.push({id:e[0],nombre:e[2].split("(*)")[0].split("-")[1],def:e[2].split("(*)")[1],seccion:e[9],profesor:"".concat(e[10]," ").concat(e[12]," ").concat(e[11])}),i.push(e)}}))})),console.log(o),{all:i,forView:o}}(n.dataFromExcel,n.seletedClassName,a);n.selectedClass=r.all,n.selectedClassForView=r.forView,console.log("selectedClass",n.selectedClass)},this.FileName=t.files[0].name,i.readAsBinaryString(t.files[0])}},{key:"nextPage",value:function(){switch(this.currentSection.number++,this.currentSection.prePageVisibility=!0,this.currentSection.number){case 2:this.loadSection2();break;case 3:this.readFilePopup(),this.loadSection3();break;case 4:this.endPage(),this.router.navigate(["/"])}}},{key:"previousPage",value:function(){this.currentSection.number--,1==this.currentSection.number&&(this.currentSection.prePageVisibility=!1)}},{key:"endPage",value:function(){var e=this;console.log("selectedClass",this.selectedClass),console.log("selectedClass",JSON.stringify(this.selectedClass)),console.log("selectedClassForView",this.selectedClassForView),console.log("selectedClassForView",JSON.stringify(this.selectedClassForView));var n,t=[];this.selectedClassForView.forEach((function(n){n.hijos.forEach((function(n){if(n.isItemChecked){var i=e.selectedClass.find((function(e){return n.id===e[0]}));t.push(i)}}))})),n=[],t.forEach((function(e){n.push({item:e[0],dpto:e[1],asignatura:e[2],nivel:e[3],sem:e[4],sigla:e[5],enfasis:e[6],plan:e[7],turno:e[8],seccion:e[9],tit:e[10],apellido:e[11],nombre:e[12],"1p":{dia:e[13],hora:e[14],aula:e[15]},"2p":{dia:e[16],hora:e[17],aula:e[18]},"1f":{dia:e[19],hora:e[20],aula:e[21]},"2f":{dia:e[22],hora:e[23],aula:e[24]},lunes:{aula:e[25],horario:e[26]},martes:{aula:e[27],horario:e[28]},miercoles:{aula:e[29],horario:e[30]},jueves:{aula:e[31],horario:e[32]},viernes:{aula:e[33],horario:e[34]},sabado:{aula:e[35],horario:e[36],noche:""}})})),t=n,console.log("toCalendar",t),window.localStorage.clear(),window.localStorage.toInicio=JSON.stringify(t)}},{key:"ngOnInit",value:function(){}}]),e}(),Q.\u0275fac=function(e){return new(e||Q)(l.Lb(u.a),l.Lb(s.a),l.Lb(a.g))},Q.\u0275cmp=l.Fb({type:Q,selectors:[["app-cargar-horario"]],decls:10,vars:5,consts:[[4,"ngIf"],["slot","end","button","",3,"click",4,"ngIf"],["slot","start","button","",3,"click",4,"ngIf"],["id","file-input","type","file","multiple","false",2,"display","none",3,"change"],[4,"ngFor","ngForOf"],["slot","start",3,"ngModel","ngModelChange","ionChange"],[1,"ion-align-self-end"],["slot","start",1,"ion-no-padding","ion-no-margin",3,"ngModel","indeterminate","ngModelChange","click"],["slot","start","name","none"],["slot","start",3,"ngModel","ngModelChange"],["slot","end","button","",3,"click"],["name","caret-forward","size","large"],["slot","start","button","",3,"click"],["name","caret-back","size","large"]],template:function(e,n){1&e&&(l.Mb(0,"app-header"),l.Mb(1,"app-menu"),l.mc(2,d,2,1,"ion-content",0),l.mc(3,C,2,1,"ion-content",0),l.mc(4,P,2,1,"ion-content",0),l.Qb(5,"ion-footer"),l.Qb(6,"ion-toolbar"),l.mc(7,k,4,0,"ion-item",1),l.mc(8,y,4,0,"ion-item",2),l.Pb(),l.Qb(9,"input",3),l.Yb("change",(function(e){return n.onFileChange(e)})),l.Pb(),l.Pb()),2&e&&(l.zb(2),l.fc("ngIf",1==n.currentSection.number),l.zb(1),l.fc("ngIf",2==n.currentSection.number),l.zb(1),l.fc("ngIf",3==n.currentSection.number),l.zb(3),l.fc("ngIf",n.currentSection.nextPageVisibility),l.zb(1),l.fc("ngIf",n.currentSection.nextPageVisibility))},directives:[b.a,f.a,i.j,s.l,s.C,s.h,i.i,s.s,s.q,s.r,s.f,s.b,o.d,o.e,s.m,s.w,s.o],styles:[""]}),Q)}],z=((w=function e(){_classCallCheck(this,e)}).\u0275mod=l.Jb({type:w}),w.\u0275inj=l.Ib({factory:function(e){return new(e||w)},imports:[[a.i.forChild(x)],a.i]}),w),I=t("lSLK"),M=((S=function e(){_classCallCheck(this,e)}).\u0275mod=l.Jb({type:S}),S.\u0275inj=l.Ib({factory:function(e){return new(e||S)},imports:[[i.b,o.a,s.D,z,I.a]]}),S)}}]);